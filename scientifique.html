<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>CalcPro Scientific Calculator</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
    margin:0;
    background:#0f172a;
    font-family: Arial, sans-serif;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    color:white;
}
.calculator{
    background:#020617;
    padding:20px;
    border-radius:20px;
    box-shadow:0 10px 40px rgba(0,0,0,.7);
    width:320px;
}
.display{
    background:#1e1e2f;
    border-radius:12px;
    padding:15px;
    font-size:24px;
    text-align:right;
    margin-bottom:10px;
    min-height:50px;
    word-wrap: break-word;
}
.history{
    background:#111;
    max-height:100px;
    overflow-y:auto;
    padding:10px;
    font-size:14px;
    margin-bottom:10px;
    border-radius:10px;
}
.button-grid{
    display:grid;
    grid-template-columns: repeat(5, 1fr);
    gap:10px;
}
button{
    padding:15px;
    font-size:18px;
    border:none;
    border-radius:12px;
    background:#1e1e2f;
    color:#22c55e;
    cursor:pointer;
    box-shadow:0 5px #111;
    transition:0.1s;
}
button:active{
    transform:translateY(2px);
    box-shadow:0 2px #111;
}
</style>
</head>
<body>

<div class="calculator">
    <div class="history" id="history"></div>
    <div class="display" id="display">0</div>
    <div class="button-grid">
        <!-- First row: scientific functions -->
        <button onclick="addInput('sin(')">sin</button>
        <button onclick="addInput('cos(')">cos</button>
        <button onclick="addInput('tg(')">tg</button>
        <button onclick="addInput('ln(')">ln</button>
        <button onclick="addInput('log(')">log</button>

        <!-- Second row -->
        <button onclick="addInput('π')">π</button>
        <button onclick="addInput('e')">e</button>
        <button onclick="addInput('√(')">√</button>
        <button onclick="addInput('^')">x^y</button>
        <button onclick="clearDisplay()">C</button>

        <!-- Numbers 7-9 -->
        <button onclick="addInput('7')">7</button>
        <button onclick="addInput('8')">8</button>
        <button onclick="addInput('9')">9</button>
        <button onclick="addInput('(')">(</button>
        <button onclick="addInput(')')">)</button>

        <!-- Numbers 4-6 -->
        <button onclick="addInput('4')">4</button>
        <button onclick="addInput('5')">5</button>
        <button onclick="addInput('6')">6</button>
        <button onclick="addInput('+')">+</button>
        <button onclick="addInput('-')">-</button>

        <!-- Numbers 1-3 -->
        <button onclick="addInput('1')">1</button>
        <button onclick="addInput('2')">2</button>
        <button onclick="addInput('3')">3</button>
        <button onclick="addInput('*')">×</button>
        <button onclick="addInput('/')">÷</button>

        <!-- Last row -->
        <button onclick="addInput('0')">0</button>
        <button onclick="addInput('.')">.</button>
        <button onclick="addInput('x')">x</button>
        <button onclick="deleteChar()">⌫</button>
        <button onclick="calculate()">=</button>
    </div>
</div>

<script>
let display = document.getElementById('display');
let historyDiv = document.getElementById('history');
let input = '';

function addInput(value){
    input += value;
    display.innerText = input;
}

function clearDisplay(){
    input = '';
    display.innerText = '0';
}

function deleteChar(){
    input = input.slice(0,-1);
    display.innerText = input || '0';
}

function calculate(){
    if(!input) return;

    let exp = input
        .replace(/π/g, 'Math.PI')
        .replace(/e/g, 'Math.E')
        .replace(/√/g, 'Math.sqrt')
        .replace(/tg\(/gi, 'Math.tan(')
        .replace(/sin\(/gi, 'Math.sin(')
        .replace(/cos\(/gi, 'Math.cos(')
        .replace(/tan\(/gi, 'Math.tan(')
        .replace(/ln\(/gi, 'Math.log(')
        .replace(/log\(/gi, 'Math.log10(')
        .replace(/x/gi,'0'); // option: X remplacé par 0 par défaut, peut modifier

    let result;
    try{
        result = eval(exp);
        if(!isFinite(result)) result='Erreur';
    }catch{
        result='Erreur';
    }

    historyDiv.innerHTML += `<div>${input} = ${result}</div>`;
    display.innerText = result;
    input = '';
}
</script>

</body>
</html>
