<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>CalcPro iOS 26 PRO</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --bg:#000;
  --glass:rgba(255,255,255,.08);
  --txt:#22c55e;
}
@media (prefers-color-scheme: light){
  :root{
    --bg:#f5f5f7;
    --glass:rgba(0,0,0,.08);
    --txt:#0a7f3f;
  }
}

body{
  margin:0;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:var(--bg);
  font-family:-apple-system,BlinkMacSystemFont,sans-serif;
}

.calc{
  width:360px;
  padding:20px;
  border-radius:42px;
  background:var(--glass);
  backdrop-filter:blur(30px);
  box-shadow:0 40px 80px rgba(0,0,0,.8);
}

.display{
  font-size:44px;
  text-align:right;
  padding:22px;
  border-radius:26px;
  background:rgba(255,255,255,.06);
  color:var(--txt);
  overflow:hidden;
}

.history{
  max-height:90px;
  overflow-y:auto;
  font-size:13px;
  color:#aaa;
  margin-top:10px;
}

.history div{
  cursor:pointer;
}
.history div:hover{color:#fff}

.grid{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:12px;
  margin-top:15px;
}

button{
  border:none;
  border-radius:50%;
  padding:20px;
  font-size:18px;
  background:rgba(255,255,255,.1);
  color:white;
  cursor:pointer;
  transition:.1s;
}
button:active{transform:scale(.9)}
.op{background:#ff9500}
.eq{background:#34c759}
.func{color:#38bdf8}
.zero{grid-column:span 2;border-radius:30px}
</style>
</head>

<body>

<div class="calc">
  <div class="display" id="display">0</div>
  <div class="history" id="history"></div>

  <div class="grid">
    <button class="func" onclick="clearAll()">AC</button>
    <button class="func" onclick="toggleSign()">±</button>
    <button class="func" onclick="useAns()">ANS</button>
    <button class="op" onclick="setOp('/')">÷</button>

    <button onclick="num(7)">7</button>
    <button onclick="num(8)">8</button>
    <button onclick="num(9)">9</button>
    <button class="op" onclick="setOp('*')">×</button>

    <button onclick="num(4)">4</button>
    <button onclick="num(5)">5</button>
    <button onclick="num(6)">6</button>
    <button class="op" onclick="setOp('-')">−</button>

    <button onclick="num(1)">1</button>
    <button onclick="num(2)">2</button>
    <button onclick="num(3)">3</button>
    <button class="op" onclick="setOp('+')">+</button>

    <button class="func" onclick="applyFunc('sqrt')">√</button>
    <button class="zero" onclick="num(0)">0</button>
    <button onclick="dot()">.</button>
    <button class="eq" onclick="calc()">=</button>

    <button class="func" onclick="applyFunc('sin')">sin</button>
    <button class="func" onclick="applyFunc('cos')">cos</button>
    <button class="func" onclick="applyFunc('log')">log</button>
    <button class="func" onclick="applyFunc('ln')">ln</button>
  </div>
</div>

<script>
let display=document.getElementById("display");
let history=document.getElementById("history");

let current="0";
let prev=null;
let operator=null;
let ans=0;
let waiting=false;

function haptic(){
  if(navigator.vibrate) navigator.vibrate(10);
}

function render(){
  display.innerText=current;
  haptic();
}

function num(n){
  if(waiting){
    current=n.toString();
    waiting=false;
  }else{
    if(current==="0") current="";
    current+=n;
  }
  render();
}

function dot(){
  if(!current.includes(".")){
    current+=".";
    render();
  }
}

function setOp(op){
  prev=parseFloat(current);
  operator=op;
  waiting=true;
}

function calc(){
  if(operator===null || waiting) return;
  let a=prev,b=parseFloat(current),r=0;

  if(operator==="+") r=a+b;
  if(operator==="-") r=a-b;
  if(operator==="*") r=a*b;
  if(operator==="/") r=b===0?"Erreur":a/b;

  addHistory(`${a} ${operator} ${b} = ${r}`,r);
}

function applyFunc(f){
  let v=parseFloat(current),r=0;
  if(f==="sqrt") r=Math.sqrt(v);
  if(f==="sin") r=Math.sin(v*Math.PI/180);
  if(f==="cos") r=Math.cos(v*Math.PI/180);
  if(f==="log") r=Math.log10(v);
  if(f==="ln") r=Math.log(v);

  addHistory(`${f}(${v}) = ${r}`,r);
}

function addHistory(txt,val){
  let d=document.createElement("div");
  d.innerText=txt;
  d.onclick=()=>{current=val.toString();render();}
  history.appendChild(d);
  history.scrollTop=history.scrollHeight;
  current=val.toString();
  ans=val;
  operator=null;
  waiting=false;
  render();
}

function toggleSign(){
  current=(parseFloat(current)*-1).toString();
  render();
}

function useAns(){
  current=ans.toString();
  render();
}

function clearAll(){
  current="0";
  prev=null;
  operator=null;
  waiting=false;
  render();
}
</script>

</body>
</html>
