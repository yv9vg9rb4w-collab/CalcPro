<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>CalcPro | Outil Géométrie</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root{
  --bg:#0f0f0f;
  --card:#1b1b1b;
  --accent:#00ffcc;
  --text:#ffffff;
  --muted:#aaaaaa;
}

/* Reset */
*{box-sizing:border-box;}
body{
  margin:0;
  padding:20px;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial;
  background:var(--bg);
  color:var(--text);
}

/* Header */
header{text-align:center;margin-bottom:30px;}
header h1{margin:0;font-size:2em;color:var(--accent);}
header p{margin-top:5px;color:var(--muted);}

/* Tool container */
#controls{
  display:flex;
  flex-wrap:wrap;
  gap:15px;
  justify-content:center;
  margin-bottom:20px;
}

#controls button{
  background:var(--card);
  border:none;
  border-radius:12px;
  padding:10px 15px;
  color:var(--text);
  font-weight:bold;
  cursor:pointer;
  box-shadow:0 0 10px rgba(0,255,204,0.2);
  transition:0.2s ease;
}

#controls button:hover{
  transform:translateY(-3px) scale(1.05);
  box-shadow:0 0 20px rgba(0,255,204,0.35);
}

/* Canvas 2D */
#canvas2D{
  display:block;
  margin:auto;
  background:#1b1b1b;
  border-radius:16px;
  box-shadow:0 0 20px rgba(0,255,204,0.3);
}

/* Definition box */
#definition{
  text-align:center;
  margin-top:10px;
  font-size:16px;
  color:var(--accent);
}

/* Three.js container */
#threejs-container{
  width:90%;
  max-width:700px;
  height:400px;
  margin:30px auto;
  border-radius:16px;
  box-shadow:0 0 25px rgba(0,255,204,0.3);
  background:#1b1b1b;
}
</style>
</head>

<body>
<header>
  <h1>Outil Géométrie CalcPro</h1>
  <p>Figures 2D & Solides 3D</p>
</header>

<div id="controls">
  <button onclick="drawShape2D('carré')">Carré</button>
  <button onclick="drawShape2D('rectangle')">Rectangle</button>
  <button onclick="drawShape2D('cercle')">Cercle</button>
  <button onclick="drawShape2D('triangle')">Triangle</button>
  <button onclick="draw3DShape('cube')">Cube 3D</button>
  <button onclick="draw3DShape('sphere')">Sphère 3D</button>
</div>

<canvas id="canvas2D" width="600" height="400"></canvas>
<div id="definition">Sélectionne une forme pour voir sa définition</div>

<div id="threejs-container"></div>

<script src="https://cdn.jsdelivr.net/npm/three@0.159.0/build/three.min.js"></script>
<script>
// ==== 2D Canvas ====
const canvas = document.getElementById('canvas2D');
const ctx = canvas.getContext('2d');
const def = document.getElementById('definition');

function drawShape2D(shape){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle="#00ffcc";
  switch(shape){
    case 'carré':
      ctx.fillRect(200,150,150,150);
      def.textContent="Carré : quadrilatère avec côtés égaux et angles droits.";
      break;
    case 'rectangle':
      ctx.fillRect(180,160,240,120);
      def.textContent="Rectangle : quadrilatère avec côtés opposés égaux.";
      break;
    case 'cercle':
      ctx.beginPath();
      ctx.arc(300,200,80,0,2*Math.PI);
      ctx.fill();
      def.textContent="Cercle : ensemble de points équidistants d’un centre.";
      break;
    case 'triangle':
      ctx.beginPath();
      ctx.moveTo(300,100);
      ctx.lineTo(200,300);
      ctx.lineTo(400,300);
      ctx.closePath();
      ctx.fill();
      def.textContent="Triangle : polygone à trois côtés.";
      break;
  }
}

// ==== 3D Three.js ====
const container = document.getElementById('threejs-container');
const scene = new THREE.Scene();
scene.background=new THREE.Color(0x1b1b1b);
const camera=new THREE.PerspectiveCamera(75,container.clientWidth/container.clientHeight,0.1,1000);
const renderer=new THREE.WebGLRenderer({antialias:true});
renderer.setSize(container.clientWidth,container.clientHeight);
container.appendChild(renderer.domElement);

const light=new THREE.DirectionalLight(0xffffff,1);
light.position.set(5,5,5);
scene.add(light);

const ambientLight=new THREE.AmbientLight(0x404040);
scene.add(ambientLight);

camera.position.z=5;
let current3D;

function draw3DShape(shape){
  if(current3D) scene.remove(current3D);
  let geometry;
  switch(shape){
    case 'cube':
      geometry=new THREE.BoxGeometry(2,2,2);
      def.textContent="Cube : solide à 6 faces carrées égales.";
      break;
    case 'sphere':
      geometry=new THREE.SphereGeometry(1.5,32,32);
      def.textContent="Sphère : ensemble de points équidistants d’un centre.";
      break;
  }
  const material=new THREE.MeshPhongMaterial({color:0x00ffcc,flatShading:true});
  current3D=new THREE.Mesh(geometry,material);
  scene.add(current3D);
}

function animate(){
  requestAnimationFrame(animate);
  if(current3D) current3D.rotation.y+=0.01;
  renderer.render(scene,camera);
}
animate();
</script>
</body>
</html>