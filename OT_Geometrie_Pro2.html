<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>CalcPro Ultimate 2D+3D</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root {
  --accent:#00ffcc;
  --bg:#0d0d0d;
  --card:#1a1a1a;
}

body {
  background:var(--bg);
  color:white;
  font-family:sans-serif;
  margin:0;
  padding:10px;
}

.interface {
  display:flex;
  flex-direction:column;
  gap:10px;
}

.btn-grid {
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:6px;
}

/* Style commun pour TOUS les boutons */
.btn-shape {
  background:var(--card);
  border:1px solid #333;
  color:white;
  border-radius:8px;
  padding:9px;
  font-size:12px;
  font-weight:bold;
  cursor:pointer;
  transition:all 0.2s ease;
}

.btn-shape:hover {
  border-color:var(--accent);
  color:var(--accent);
}

.btn-shape:active {
  background:var(--accent);
  color:black;
}

/* Bouton sp√©cial "effacer" */
.full {
  grid-column:span 2;
  border-color:#ff4d4d;
  color:#ff4d4d;
}

.titre {
  grid-column:span 2;
  text-align:center;
  color:var(--accent);
  border-bottom:1px solid #333;
  margin-top:5px;
}

#ecran {
  position:relative;
  height:85vh;
  width:100%;
  background:#000;
  border-radius:12px;
  margin-top:10px;
}

#canvas2D,#container3D {
  position:absolute;
  width:100%;
  height:100%;
  top:0;
  left:0;
}

#canvas2D { z-index:1; }
#container3D { z-index:2; }

#definition {
  text-align:center;
  color:var(--accent);
  margin-top:8px;
  font-size:14px;
}
</style>
</head>
<body>

<div class="interface">
  <div class="btn-grid">

    <button class="btn-shape full" onclick="resetAll()">üóëÔ∏è EFFACER</button>

    <div class="titre">FIGURES 2D</div>
    <button class="btn-shape" onclick="draw2D('carre')">Carr√©</button>
    <button class="btn-shape" onclick="draw2D('rect')">Rectangle</button>
    <button class="btn-shape" onclick="draw2D('losange')">Losange</button>
    <button class="btn-shape" onclick="draw2D('para')">Parall√©logramme</button>
    <button class="btn-shape" onclick="draw2D('trapeze')">Trap√®ze</button>
    <button class="btn-shape" onclick="draw2D('cercle')">Cercle</button>

    <button class="btn-shape" onclick="draw2D('equi')">Tri. √âquilat√©ral</button>
    <button class="btn-shape" onclick="draw2D('iso')">Tri. Isoc√®le</button>
    <button class="btn-shape" onclick="draw2D('sca')">Tri. Scal√®ne</button>
    <button class="btn-shape" onclick="draw2D('rectTri')">Tri. Rectangle</button>
    <button class="btn-shape" onclick="draw2D('aigu')">Tri. Aigu</button>
    <button class="btn-shape" onclick="draw2D('obtus')">Tri. Obtus</button>

    <button class="btn-shape" onclick="draw2D('pentagone')">Pentagone</button>
    <button class="btn-shape" onclick="draw2D('hexagone')">Hexagone</button>
    <button class="btn-shape" onclick="draw2D('octogone')">Octogone</button>
    <button class="btn-shape" onclick="draw2D('ellipse')">Ellipse</button>

    <div class="titre">FIGURES 3D</div>
    <button class="btn-shape" onclick="draw3D('cube')">Cube</button>
    <button class="btn-shape" onclick="draw3D('pave')">Pav√©</button>
    <button class="btn-shape" onclick="draw3D('sphere')">Sph√®re</button>
    <button class="btn-shape" onclick="draw3D('cylindre')">Cylindre</button>
    <button class="btn-shape" onclick="draw3D('cone')">C√¥ne</button>
    <button class="btn-shape" onclick="draw3D('pyramide')">Pyramide</button>
    <button class="btn-shape" onclick="draw3D('prisme')">Prisme</button>
    <button class="btn-shape" onclick="draw3D('tore')">Tore</button>

  </div>
</div>

<div id="ecran">
  <canvas id="canvas2D"></canvas>
  <div id="container3D"></div>
</div>

<div id="definition">Choisissez une figure</div>

<!-- THREE.JS CLASSIC -->
<script src="https://cdn.jsdelivr.net/npm/three@0.159.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.159.0/examples/js/controls/OrbitControls.js"></script>

<script>
// üåü Variables globales
const canvas = document.getElementById("canvas2D");
const ctx = canvas.getContext("2d");
const container = document.getElementById("container3D");
const def = document.getElementById("definition");

canvas.width = container.clientWidth;
canvas.height = container.clientHeight;

// 3D setup
let scene = new THREE.Scene();
let camera = new THREE.PerspectiveCamera(75, container.clientWidth/container.clientHeight, 0.1, 1000);
camera.position.z = 6;

let renderer = new THREE.WebGLRenderer({alpha:true});
renderer.setSize(container.clientWidth, container.clientHeight);
container.appendChild(renderer.domElement);

scene.add(new THREE.AmbientLight(0xffffff,0.9));
let controls = new THREE.OrbitControls(camera, renderer.domElement);
controls.enableDamping = true;

let mesh = null;

function animate(){
  requestAnimationFrame(animate);
  if(mesh) mesh.rotation.y += 0.01;
  controls.update();
  renderer.render(scene,camera);
}
animate();

// üåü Fonctions globales
window.resetAll = function(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  if(mesh){scene.remove(mesh); mesh=null;}
  def.textContent="√âcran nettoy√©";
}

// 2D
window.draw2D = function(type){
  resetAll();
  canvas.style.zIndex = 2;
  container.style.zIndex = 1;
  ctx.fillStyle = "#00ffcc";
  const x = canvas.width/2, y = canvas.height/2;
  ctx.beginPath();

  if(type==="carre") ctx.fillRect(x-60,y-60,120,120);
  else if(type==="rect") ctx.fillRect(x-90,y-50,180,100);
  else if(type==="losange"){ctx.moveTo(x,y-70);ctx.lineTo(x-90,y);ctx.lineTo(x,y+70);ctx.lineTo(x+90,y);ctx.closePath();ctx.fill();}
  else if(type==="para"){ctx.moveTo(x-80,y-60);ctx.lineTo(x+40,y-60);ctx.lineTo(x+80,y+60);ctx.lineTo(x-40,y+60);ctx.closePath();ctx.fill();}
  else if(type==="trapeze"){ctx.moveTo(x-80,y+60);ctx.lineTo(x+80,y+60);ctx.lineTo(x+50,y-60);ctx.lineTo(x-50,y-60);ctx.closePath();ctx.fill();}
  else if(type==="cercle"){ctx.arc(x,y,70,0,Math.PI*2);ctx.fill();}
  else if(type==="equi"){let h=120*Math.sqrt(3)/2;ctx.moveTo(x,y-h/2);ctx.lineTo(x-60,y+h/2);ctx.lineTo(x+60,y+h/2);ctx.closePath();ctx.fill();}
  else if(type==="iso"){ctx.moveTo(x,y-90);ctx.lineTo(x-70,y+60);ctx.lineTo(x+70,y+60);ctx.closePath();ctx.fill();}
  else if(type==="sca"){ctx.moveTo(x-40,y-80);ctx.lineTo(x-90,y+60);ctx.lineTo(x+100,y+20);ctx.closePath();ctx.fill();}
  else if

  </script>
</body>
</html>
