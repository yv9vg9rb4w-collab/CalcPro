<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Outil de Géométrie 2D et 3D</title>
<style>
  body { font-family: Arial, sans-serif; display: flex; flex-direction: column; align-items: center; margin: 0; padding: 20px; background: #f0f0f0; }
  canvas { border: 1px solid #000; margin-bottom: 10px; background: #fff; }
  #controls { margin-bottom: 20px; }
  button { margin: 5px; padding: 10px; }
  #definition { margin-top: 10px; font-weight: bold; }
  #threejs-container { width: 500px; height: 400px; border: 1px solid #000; background: #fff; }
</style>
</head>
<body>

<h1>Outil de Géométrie 2D et 3D</h1>

<div id="controls">
  <button onclick="drawShape('rectangle')">Rectangle</button>
  <button onclick="drawShape('carré')">Carré</button>
  <button onclick="drawShape('cercle')">Cercle</button>
  <button onclick="drawShape('triangle')">Triangle</button>
  <button onclick="draw3DShape('cube')">Cube 3D</button>
  <button onclick="draw3DShape('sphere')">Sphère 3D</button>
  <button onclick="draw3DShape('cylindre')">Cylindre 3D</button>
</div>

<canvas id="canvas2D" width="500" height="400"></canvas>
<div id="definition">Sélectionne une forme pour voir sa définition</div>

<h2>Vue 3D</h2>
<div id="threejs-container"></div>

<!-- Three.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/three@0.159.0/build/three.min.js"></script>

<script>
// ==== 2D Canvas ====
const canvas = document.getElementById('canvas2D');
const ctx = canvas.getContext('2d');
const def = document.getElementById('definition');

function drawShape(shape) {
  ctx.clearRect(0,0,canvas.width,canvas.height);

  switch(shape) {
    case 'rectangle':
      ctx.fillStyle = '#FF5733';
      ctx.fillRect(50, 50, 200, 100);
      def.textContent = "Rectangle : quadrilatère avec côtés opposés égaux.";
      break;
    case 'carré':
      ctx.fillStyle = '#33FF57';
      ctx.fillRect(100, 100, 150, 150);
      def.textContent = "Carré : quadrilatère avec tous les côtés égaux et angles droits.";
      break;
    case 'cercle':
      ctx.fillStyle = '#3357FF';
      ctx.beginPath();
      ctx.arc(250, 200, 80, 0, 2*Math.PI);
      ctx.fill();
      def.textContent = "Cercle : ensemble de points équidistants d’un centre.";
      break;
    case 'triangle':
      ctx.fillStyle = '#FF33A8';
      ctx.beginPath();
      ctx.moveTo(250, 50);
      ctx.lineTo(150, 300);
      ctx.lineTo(350, 300);
      ctx.closePath();
      ctx.fill();
      def.textContent = "Triangle : polygone à trois côtés.";
      break;
  }
}

// ==== 3D avec Three.js ====
const container = document.getElementById('threejs-container');
const scene = new THREE.Scene();
scene.background = new THREE.Color(0xffffff);
const camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
const renderer = new THREE.WebGLRenderer();
renderer.setSize(container.clientWidth, container.clientHeight);
container.appendChild(renderer.domElement);

const light = new THREE.DirectionalLight(0xffffff, 1);
light.position.set(5,5,5);
scene.add(light);

camera.position.z = 5;
let current3DShape;

function draw3DShape(shape) {
  if(current3DShape) scene.remove(current3DShape);

  let geometry;
  switch(shape) {
    case 'cube':
      geometry = new THREE.BoxGeometry(2,2,2);
      def.textContent = "Cube : solide à 6 faces carrées égales.";
      break;
    case 'sphere':
      geometry = new THREE.SphereGeometry(1.5, 32, 32);
      def.textContent = "Sphère : ensemble de points équidistants d’un centre dans l’espace 3D.";
      break;
    case 'cylindre':
      geometry = new THREE.CylinderGeometry(1,1,3,32);
      def.textContent = "Cylindre : solide avec deux bases circulaires parallèles.";
      break;
  }

  const material = new THREE.MeshPhongMaterial({ color: 0xff0000, flatShading: true });
  current3DShape = new THREE.Mesh(geometry, material);
  scene.add(current3DShape);
}

function animate() {
  requestAnimationFrame(animate);
  if(current3DShape) current3DShape.rotation.y += 0.01;
  renderer.render(scene, camera);
}
animate();

</script>

</body>
</html>