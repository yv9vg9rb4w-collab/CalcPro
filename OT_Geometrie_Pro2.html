<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>CalcPro G√©o - Version Expert</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<style>
    :root { --accent: #00ffcc; --bg: #0f0f0f; }
    body { background: var(--bg); color: white; font-family: sans-serif; margin: 0; padding: 10px; touch-action: manipulation; }
    
    /* Structure en liste pour mobile : rien ne d√©borde √† droite */
    .menu-container { display: flex; flex-direction: column; gap: 10px; margin-bottom: 20px; }
    .group { display: flex; flex-direction: column; gap: 5px; background: #1a1a1a; padding: 10px; border-radius: 10px; border: 1px solid #333; }
    .label { color: var(--accent); font-size: 12px; font-weight: bold; text-transform: uppercase; margin-bottom: 5px; }
    
    button { 
        background: #2a2a2a; border: 1px solid #444; color: white; border-radius: 8px;
        padding: 15px; font-size: 14px; font-weight: bold; cursor: pointer; width: 100%;
    }
    button:active { background: var(--accent); color: black; }
    .btn-clear { background: #441111; border-color: #ff4d4d; color: #ff4d4d; }

    /* Affichage */
    #ecran { 
        position: relative; width: 100%; height: 350px; background: #000; 
        border: 2px solid #333; border-radius: 15px; overflow: hidden; 
    }
    #canvas2D { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 10; pointer-events: none; }
    #container3D { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 5; }
    
    #definition { text-align: center; padding: 15px; color: var(--accent); font-size: 14px; line-height: 1.4; }
</style>
</head>
<body>

<div class="menu-container">
    <button class="btn-clear" onclick="toutEffacer()">üóëÔ∏è EFFACER TOUT</button>

    <div class="group">
        <div class="label">Polygones 2D</div>
        <button onclick="traceCarre()">CARR√â</button>
        <button onclick="traceRect()">RECTANGLE</button>
        <button onclick="traceCercle()">CERCLE</button>
    </div>

    <div class="group">
        <div class="label">Les Triangles</div>
        <button onclick="traceTriEqui()">√âQUILAT√âRAL (3 c√¥t√©s =)</button>
        <button onclick="traceTriIso()">ISOC√àLE (2 c√¥t√©s =)</button>
        <button onclick="traceTriSca()">SCAL√àNE (In√©gal)</button>
    </div>

    <div class="group">
        <div class="label">Volumes 3D</div>
        <button onclick="geo3D('cube')">CUBE 3D</button>
        <button onclick="geo3D('sphere')">SPH√àRE 3D</button>
        <button onclick="geo3D('cone')">C√îNE 3D</button>
    </div>
</div>

<div id="ecran">
    <canvas id="canvas2D"></canvas>
    <div id="container3D"></div>
</div>

<div id="definition">Appuyez sur un bouton</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.159.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.159.0/examples/js/controls/OrbitControls.js"></script>

<script>
const canvas = document.getElementById('canvas2D');
const ctx = canvas.getContext('2d');
const def = document.getElementById('definition');
const container = document.getElementById('container3D');

let scene, camera, renderer, controls, objet3D = null;

function init() {
    scene = new THREE.Scene();
    camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
    camera.position.z = 5;

    renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
    renderer.setSize(container.clientWidth, container.clientHeight);
    container.appendChild(renderer.domElement);

    const light = new THREE.PointLight(0xffffff, 1, 100);
    light.position.set(10, 10, 10);
    scene.add(light, new THREE.AmbientLight(0x404040));

    controls = new THREE.OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;

    canvas.width = container.clientWidth;
    canvas.height = container.clientHeight;
    
    animate();
}

function toutEffacer() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    if (objet3D) { scene.remove(objet3D); objet3D = null; }
    def.textContent = "√âcran nettoy√©";
}

// --- LOGIQUE 2D ---
function traceCarre() {
    toutEffacer();
    ctx.fillStyle = "#00ffcc";
    ctx.fillRect(canvas.width/2 - 50, canvas.height/2 - 50, 100, 100);
    def.textContent = "CARR√â : 4 c√¥t√©s √©gaux, 4 angles droits.";
}

function traceRect() {
    toutEffacer();
    ctx.fillStyle = "#00ffcc";
    ctx.fillRect(canvas.width/2 - 80, canvas.height/2 - 40, 160, 80);
    def.textContent = "RECTANGLE : Longueur diff√©rente de la largeur.";
}

function traceCercle() {
    toutEffacer();
    ctx.beginPath(); ctx.arc(canvas.width/2, canvas.height/2, 60, 0, Math.PI*2);
    ctx.fillStyle = "#00ffcc"; ctx.fill();
    def.textContent = "CERCLE : Ensemble de points √©quidistants du centre.";
}

// LES 3 TRIANGLES
function traceTriEqui() {
    toutEffacer();
    const x = canvas.width/2, y = canvas.height/2 + 20;
    ctx.beginPath();
    ctx.moveTo(x, y-80); ctx.lineTo(x-70, y+40); ctx.lineTo(x+70, y+40);
    ctx.closePath(); ctx.fillStyle = "#00ffcc"; ctx.fill();
    def.textContent = "√âQUILAT√âRAL : 3 c√¥t√©s √©gaux, 3 angles de 60¬∞.";
}

function traceTriIso() {
    toutEffacer();
    const x = canvas.width/2, y = canvas.height/2 + 20;
    ctx.beginPath();
    ctx.moveTo(x, y-100); ctx.lineTo(x-40, y+40); ctx.lineTo(x+40, y+40);
    ctx.closePath(); ctx.fillStyle = "#00ffcc"; ctx.fill();
    def.textContent = "ISOC√àLE : 2 c√¥t√©s √©gaux, 2 angles √©gaux.";
}

function traceTriSca() {
    toutEffacer();
    const x = canvas.width/2, y = canvas.height/2;
    ctx.beginPath();
    ctx.moveTo(x-20, y-50); ctx.lineTo(x-80, y+60); ctx.lineTo(x+90, y+30);
    ctx.closePath(); ctx.fillStyle = "#00ffcc"; ctx.fill();
    def.textContent = "SCAL√àNE : 3 c√¥t√©s de longueurs diff√©rentes.";
}

// --- LOGIQUE 3D ---
function geo3D(type) {
    toutEffacer();
    let geo;
    if(type === 'cube') geo = new THREE.BoxGeometry(2,2,2);
    if(type === 'sphere') geo = new THREE.SphereGeometry(1.5, 32, 32);
    if(type === 'cone') geo = new THREE.ConeGeometry(1.5, 3, 32);
    
    objet3D = new THREE.Mesh(geo, new THREE.MeshPhongMaterial({color: 0x00ffcc, flatShading: true}));
    scene.add(objet3D);
    def.textContent = type.toUpperCase() + " 3D : Faites glisser pour tourner.";
}

function animate() {
    requestAnimationFrame(animate);
    if (objet3D) objet3D.rotation.y += 0.01;
    controls.update();
    renderer.render(scene, camera);
}

init();
</script>
</body>
</html>