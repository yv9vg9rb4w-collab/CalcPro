<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>CalcPro Stable</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root{--accent:#00ffcc;--bg:#0d0d0d;--card:#1a1a1a;}

body{
background:var(--bg);
color:white;
font-family:sans-serif;
margin:0;
padding:10px;
}

.interface{
display:flex;
flex-direction:column;
gap:10px;
}

.btn-grid{
display:grid;
grid-template-columns:1fr 1fr;
gap:6px;
}

button{
background:var(--card);
border:1px solid #333;
color:white;
border-radius:8px;
padding:10px;
font-size:12px;
font-weight:bold;
cursor:pointer;
}

button:active{
background:var(--accent);
color:black;
}

.full{
grid-column:span 2;
border-color:#ff4d4d;
color:#ff4d4d;
}

.titre{
grid-column:span 2;
text-align:center;
color:var(--accent);
border-bottom:1px solid #333;
margin-top:5px;
}

/* üî• GRAND TABLEAU */
#ecran{
position:relative;
height:80vh;   /* beaucoup plus grand */
width:100%;
background:#000;
border-radius:12px;
margin-top:10px;
}

#canvas2D,#container3D{
position:absolute;
width:100%;
height:100%;
top:0;
left:0;
}

#canvas2D{z-index:1;}
#container3D{z-index:2;}

#definition{
text-align:center;
color:var(--accent);
margin-top:8px;
font-size:14px;
}
</style>
</head>
<body>

<div class="interface">
<div class="btn-grid">

<button class="full" onclick="resetAll()">üóëÔ∏è EFFACER</button>

<div class="titre">FIGURES 2D</div>

<button onclick="draw2D('carre')">Carr√©</button>
<button onclick="draw2D('cercle')">Cercle</button>
<button onclick="draw2D('triangle')">Triangle</button>

<div class="titre">FIGURES 3D</div>

<button onclick="draw3D('cube')">Cube</button>
<button onclick="draw3D('sphere')">Sph√®re</button>

</div>
</div>

<div id="ecran">
<canvas id="canvas2D"></canvas>
<div id="container3D"></div>
</div>

<div id="definition">Choisissez une figure</div>

<!-- THREE NORMAL (PAS MODULE) -->
<script src="https://cdn.jsdelivr.net/npm/three@0.159.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.159.0/examples/js/controls/OrbitControls.js"></script>

<script>

const canvas=document.getElementById("canvas2D");
const ctx=canvas.getContext("2d");
const container=document.getElementById("container3D");
const def=document.getElementById("definition");

canvas.width=container.clientWidth;
canvas.height=container.clientHeight;

/* 3D SETUP */
let scene=new THREE.Scene();
let camera=new THREE.PerspectiveCamera(75,container.clientWidth/container.clientHeight,0.1,1000);
camera.position.z=5;

let renderer=new THREE.WebGLRenderer({alpha:true});
renderer.setSize(container.clientWidth,container.clientHeight);
container.appendChild(renderer.domElement);

scene.add(new THREE.AmbientLight(0xffffff,0.8));

let controls=new THREE.OrbitControls(camera,renderer.domElement);

let mesh=null;

function animate(){
requestAnimationFrame(animate);
if(mesh) mesh.rotation.y+=0.01;
controls.update();
renderer.render(scene,camera);
}
animate();

/* RESET */
function resetAll(){
ctx.clearRect(0,0,canvas.width,canvas.height);
if(mesh){scene.remove(mesh);mesh=null;}
def.textContent="√âcran nettoy√©";
}

/* 2D */
function draw2D(type){
resetAll();
container.style.zIndex=1;
canvas.style.zIndex=2;

ctx.fillStyle="#00ffcc";
let x=canvas.width/2;
let y=canvas.height/2;

if(type==="carre"){
ctx.fillRect(x-60,y-60,120,120);
def.textContent="Carr√©";
}

if(type==="cercle"){
ctx.beginPath();
ctx.arc(x,y,70,0,Math.PI*2);
ctx.fill();
def.textContent="Cercle";
}

if(type==="triangle"){
ctx.beginPath();
ctx.moveTo(x,y-80);
ctx.lineTo(x-70,y+60);
ctx.lineTo(x+70,y+60);
ctx.closePath();
ctx.fill();
def.textContent="Triangle";
}
}

/* 3D */
function draw3D(type){
resetAll();
canvas.style.zIndex=1;
container.style.zIndex=2;

let geo;

if(type==="cube"){
geo=new THREE.BoxGeometry(2,2,2);
}

if(type==="sphere"){
geo=new THREE.SphereGeometry(1.5,32,32);
}

mesh=new THREE.Mesh(geo,new THREE.MeshNormalMaterial());
scene.add(mesh);

def.textContent=type.toUpperCase();
}

</script>

</body>
</html>
