<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Outil G√©om√©trie ‚Äì CalcPro PRO</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  background: #0f0f0f;
  color: white;
  font-family: Arial, sans-serif;
}

header {
  padding: 15px;
  text-align: center;
  font-size: 24px;
  background: #111;
  border-bottom: 1px solid #333;
}

.container {
  display: flex;
  height: calc(100vh - 90px);
}

.tools {
  width: 260px;
  background: #151515;
  padding: 10px;
  border-right: 1px solid #333;
}

.tools button {
  width: 100%;
  padding: 10px;
  margin-bottom: 8px;
  background: #222;
  color: white;
  border: none;
  cursor: pointer;
}

.tools button:hover {
  background: #00c853;
}

.info {
  font-size: 13px;
  background: #111;
  padding: 8px;
  margin-top: 10px;
  border: 1px solid #333;
}

canvas {
  flex: 1;
  background: #0a0a0a;
}

footer {
  text-align: center;
  padding: 6px;
  font-size: 12px;
  background: #111;
  color: #888;
}
</style>
</head>

<body>

<header>üìê Outil de G√©om√©trie ‚Äì CalcPro PRO</header>

<div class="container">
  <div class="tools">
    <button onclick="setMode('point')">üîµ Point</button>
    <button onclick="setMode('segment')">üìè Segment</button>
    <button onclick="setMode('triangle')">üî∫ Triangle</button>
    <button onclick="clearAll()">üóëÔ∏è Effacer</button>

    <div class="info" id="info">
      Coordonn√©es :<br>
      ‚Äî
    </div>
  </div>

  <canvas id="canvas"></canvas>
</div>

<footer>CalcPro ¬© Lebbar Yahya</footer>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const info = document.getElementById("info");

canvas.width = window.innerWidth - 260;
canvas.height = window.innerHeight - 90;

let mode = "point";
let objects = [];
let temp = [];

function setMode(m) {
  mode = m;
  temp = [];
}

function drawGrid() {
  ctx.strokeStyle = "#222";
  for (let i = 0; i < canvas.width; i += 25) {
    ctx.beginPath();
    ctx.moveTo(i, 0);
    ctx.lineTo(i, canvas.height);
    ctx.stroke();
  }
  for (let j = 0; j < canvas.height; j += 25) {
    ctx.beginPath();
    ctx.moveTo(0, j);
    ctx.lineTo(canvas.width, j);
    ctx.stroke();
  }

  ctx.strokeStyle = "#555";
  ctx.beginPath();
  ctx.moveTo(canvas.width/2, 0);
  ctx.lineTo(canvas.width/2, canvas.height);
  ctx.stroke();

  ctx.beginPath();
  ctx.moveTo(0, canvas.height/2);
  ctx.lineTo(canvas.width, canvas.height/2);
  ctx.stroke();
}

function distance(a, b) {
  return Math.hypot(b.x - a.x, b.y - a.y);
}

function angle(A, B, C) {
  const AB = distance(A, B);
  const BC = distance(B, C);
  const AC = distance(A, C);
  return Math.acos((AB*AB + BC*BC - AC*AC)/(2*AB*BC)) * 180 / Math.PI;
}

function triangleArea(A, B, C) {
  return Math.abs(
    (A.x*(B.y-C.y)+B.x*(C.y-A.y)+C.x*(A.y-B.y))/2
  );
}

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  drawGrid();

  for (let o of objects) {
    if (o.type === "point") {
      ctx.fillStyle = "#00e5ff";
      ctx.beginPath();
      ctx.arc(o.x, o.y, 5, 0, Math.PI*2);
      ctx.fill();
    }

    if (o.type === "segment") {
      ctx.strokeStyle = "#00c853";
      ctx.beginPath();
      ctx.moveTo(o.a.x, o.a.y);
      ctx.lineTo(o.b.x, o.b.y);
      ctx.stroke();
    }

    if (o.type === "triangle") {
      ctx.strokeStyle = "#ff9100";
      ctx.beginPath();
      ctx.moveTo(o.A.x, o.A.y);
      ctx.lineTo(o.B.x, o.B.y);
      ctx.lineTo(o.C.x, o.C.y);
      ctx.closePath();
      ctx.stroke();
    }
  }
}

canvas.addEventListener("click", e => {
  const r = canvas.getBoundingClientRect();
  const x = e.clientX - r.left;
  const y = e.clientY - r.top;

  info.innerHTML = `Coordonn√©es :<br>x = ${(x - canvas.width/2).toFixed(2)}<br>y = ${(canvas.height/2 - y).toFixed(2)}`;

  if (mode === "point") {
    objects.push({type:"point", x, y});
  }

  if (mode === "segment") {
    temp.push({x,y});
    if (temp.length === 2) {
      const d = distance(temp[0], temp[1]);
      info.innerHTML += `<br>Longueur = ${d.toFixed(2)}`;
      objects.push({type:"segment", a:temp[0], b:temp[1]});
      temp=[];
    }
  }

  if (mode === "triangle") {
    temp.push({x,y});
    if (temp.length === 3) {
      const A=temp[0], B=temp[1], C=temp[2];
      const p = distance(A,B)+distance(B,C)+distance(A,C);
      const area = triangleArea(A,B,C);
      const ang = angle(A,B,C);
      info.innerHTML += `<br>P√©rim√®tre = ${p.toFixed(2)}<br>Aire = ${area.toFixed(2)}<br>Angle = ${ang.toFixed(1)}¬∞`;
      objects.push({type:"triangle", A,B,C});
      temp=[];
    }
  }

  draw();
});

function clearAll() {
  objects=[];
  temp=[];
  info.innerHTML="Coordonn√©es :<br>‚Äî";
  draw();
}

draw();
</script>

</body>
</html>
