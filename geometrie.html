<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>CalcPro G√©om√©trie PRO</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root {
  --accent:#00ffcc;
  --bg:#0d0d0d;
  --card:#1a1a1a;
}
body {
  background:var(--bg);
  color:white;
  font-family:sans-serif;
  margin:0;
  padding:10px;
}
.interface {
  display:flex;
  flex-direction:column;
  gap:10px;
}
.btn-grid {
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:6px;
}
.btn-shape {
  background:var(--card);
  border:1px solid #333;
  color:white;
  border-radius:8px;
  padding:9px;
  font-size:12px;
  font-weight:bold;
  cursor:pointer;
  transition:all 0.2s ease;
}
.btn-shape:hover {
  border-color:var(--accent);
  color:var(--accent);
}
.btn-shape:active {
  background:var(--accent);
  color:black;
}
.full {
  grid-column:span 2;
  border-color:#ff4d4d;
  color:#ff4d4d;
}
.titre {
  grid-column:span 2;
  text-align:center;
  color:var(--accent);
  border-bottom:1px solid #333;
  margin-top:5px;
}
#ecran {
  position:relative;
  height:65vh;
  width:100%;
  background:#000;
  border-radius:12px;
  margin-top:10px;
}
#canvas2D, #container3D {
  width:100%;
  height:100%;
  display:block;
}
#container3D {
  position:absolute;
  top:0;
  left:0;
  z-index:5;
}
#definition, #mesures, #formules {
  text-align:center;
  color:var(--accent);
  margin-top:8px;
  font-size:14px;
}
#mesures { color:#ff4d4d; }
#formules { color:#ffff66; font-size:12px; line-height:1.4; }
</style>
</head>
<body>

<div class="interface">
  <div class="btn-grid">
    <button class="btn-shape full" onclick="resetAll()">üóëÔ∏è EFFACER</button>

    <div class="titre">FIGURES 2D</div>
    <button class="btn-shape" onclick="draw2D('carre')">Carr√©</button>
    <button class="btn-shape" onclick="draw2D('rect')">Rectangle</button>
    <button class="btn-shape" onclick="draw2D('cercle')">Cercle</button>
    <button class="btn-shape" onclick="draw2D('equi')">Triangle √©quilat√©ral</button>
    <button class="btn-shape" onclick="draw2D('iso')">Triangle isoc√®le</button>
    <button class="btn-shape" onclick="draw2D('sca')">Triangle scal√®ne</button>
    <button class="btn-shape" onclick="draw2D('rectTri')">Triangle rectangle</button>
    <button class="btn-shape" onclick="draw2D('pentagone')">Pentagone</button>
    <button class="btn-shape" onclick="draw2D('hexagone')">Hexagone</button>

    <div class="titre">FIGURES 3D</div>
    <button class="btn-shape" onclick="draw3D('cube')">Cube</button>
    <button class="btn-shape" onclick="draw3D('sphere')">Sph√®re</button>
    <button class="btn-shape" onclick="draw3D('cone')">C√¥ne</button>
    <button class="btn-shape" onclick="draw3D('cylindre')">Cylindre</button>
    <button class="btn-shape" onclick="draw3D('pyramide')">Pyramide</button>
    <button class="btn-shape" onclick="draw3D('tore')">Tore</button>
  </div>
</div>

<div id="ecran">
  <canvas id="canvas2D"></canvas>
  <div id="container3D"></div>
</div>

<div id="definition">Choisissez une figure</div>
<div id="mesures">Mesures : ‚Äî</div>
<div id="formules">Formules : ‚Äî</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.159.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.159.0/examples/js/controls/OrbitControls.js"></script>
<script>
// üåü Variables globales
const canvas = document.getElementById("canvas2D");
const ctx = canvas.getContext("2d");
const def = document.getElementById("definition");
const mesures = document.getElementById("mesures");
const formules = document.getElementById("formules");
const container3D = document.getElementById("container3D");

let scene, camera, renderer, controls, meshActuel=null;

function resizeCanvas(){
  canvas.width = canvas.clientWidth;
  canvas.height = canvas.clientHeight;
  if(renderer){
    renderer.setSize(container3D.clientWidth, container3D.clientHeight);
    camera.aspect = container3D.clientWidth/container3D.clientHeight;
    camera.updateProjectionMatrix();
  }
}
window.addEventListener('resize',resizeCanvas);
resizeCanvas();

function resetAll(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  if(meshActuel){ scene.remove(meshActuel); meshActuel=null; }
  def.textContent="√âcran nettoy√©";
  mesures.textContent="Mesures : ‚Äî";
  formules.textContent="Formules : ‚Äî";
}

// --- 2D ---
function draw2D(type){
  resetAll();
  ctx.fillStyle="#00ffcc";
  ctx.strokeStyle="#00ffcc";
  ctx.lineWidth=2;
  const x = canvas.width/2;
  const y = canvas.height/2;
  let mesureTexte="", formuleTexte="‚Äî";
  ctx.beginPath();

  if(type==="carre"){
    const side=120; ctx.fillRect(x-side/2,y-side/2,side,side);
    mesureTexte=`P√©rim√®tre: ${4*side}px | Aire: ${side*side}px¬≤`;
  }
  else if(type==="rect"){
    const w=180,h=100; ctx.fillRect(x-w/2,y-h/2,w,h);
    mesureTexte=`P√©rim√®tre: ${2*(w+h)}px | Aire: ${w*h}px¬≤`;
  }
  else if(type==="cercle"){
    const r=70; ctx.arc(x,y,r,0,Math.PI*2); ctx.fill();
    mesureTexte=`Circonf√©rence: ${(2*Math.PI*r).toFixed(2)}px | Aire: ${(Math.PI*r*r).toFixed(2)}px¬≤`;
  }
  else if(type==="equi"){
    const a=120; const h=a*Math.sqrt(3)/2;
    ctx.moveTo(x,y-h/2); ctx.lineTo(x-a/2,y+h/2); ctx.lineTo(x+a/2,y+h/2); ctx.closePath(); ctx.fill();
    mesureTexte=`P√©rim√®tre: ${(3*a).toFixed(2)}px | Aire: ${(a*h/2).toFixed(2)}px¬≤`;
  }
  else if(type==="iso"){
    const b=100,h=120; ctx.moveTo(x,y-h/2); ctx.lineTo(x-b/2,y+h/2); ctx.lineTo(x+b/2,y+h/2); ctx.closePath(); ctx.fill();
    mesureTexte=`P√©rim√®tre: ~${(2*Math.sqrt((b/2)**2+h**2)+b).toFixed(2)}px | Aire: ${(b*h/2).toFixed(2)}px¬≤`;
  }
  else if(type==="sca"){
    ctx.moveTo(x-40,y-60); ctx.lineTo(x-40+100/2,y+60); ctx.lineTo(x+40+90/2,y+20); ctx.closePath(); ctx.fill();
    mesureTexte="Triangle scal√®ne (approximatif)";
  }
  else if(type==="rectTri"){
    const base=120,height=100;
    ctx.moveTo(x-base/2,y+height/2); ctx.lineTo(x-base/2,y-height/2); ctx.lineTo(x+base/2,y+height/2); ctx.closePath(); ctx.fill();
    const hyp=Math.sqrt(base**2+height**2);
    mesureTexte=`Base:${base}px | Hauteur:${height}px | Hypoth√©nuse:${hyp.toFixed(2)}px | Aire:${(base*height/2).toFixed(2)}px¬≤`;
    formuleTexte=`sin Œ∏ = oppos√©/hypot√©nuse | cos Œ∏ = adjacent/hypot√©nuse | tan Œ∏ = oppos√©/adjacent
Loi des sinus: a/sinA = b/sinB = c/sinC
Loi des cosinus: c¬≤ = a¬≤ + b¬≤ ‚àí 2ab cos C
Conversion: rad = deg √ó œÄ/180 | deg = rad √ó 180/œÄ
Angles:
0¬∞ 0 0 1
30¬∞ œÄ/6 1/2 ‚àö3/2
45¬∞ œÄ/4 ‚àö2/2 ‚àö2/2
60¬∞ œÄ/3 ‚àö3/2 1/2
90¬∞ œÄ/2 1 0`;
  }

  ctx.fill();
  def.textContent=type.toUpperCase();
  mesures.textContent=`Mesures : ${mesureTexte}`;
  formules.textContent=formuleTexte;
}

// Polygone r√©gulier
function drawPoly(sides,radius){
  const x = canvas.width/2;
  const y = canvas.height/2;
  const angle = 2*Math.PI/sides;
  ctx.beginPath();
  for(let i=0;i<sides;i++){
    const px = x + radius*Math.cos(i*angle - Math.PI/2);
    const py = y + radius*Math.sin(i*angle - Math.PI/2);
    if(i===0) ctx.moveTo(px,py); else ctx.lineTo(px,py);
  }
  ctx.closePath(); ctx.fill();
  mesures.textContent=`Mesures : ${sides}-gon r√©gulier (rayon:${radius}px)`;
  formules.textContent="Formules : ‚Äî";
}

// --- 3D ---
function init3D(){
  if(!scene){
    scene = new THREE.Scene();
    camera = new THREE.PerspectiveCamera(75, container3D.clientWidth/container3D.clientHeight, 0.1, 1000);
    camera.position.z=5;
    renderer = new THREE.WebGLRenderer({antialias:true, alpha:true});
    renderer.setSize(container3D.clientWidth,container3D.clientHeight);
    container3D.appendChild(renderer.domElement);
    const light = new THREE.DirectionalLight(0xffffff,1);
    light.position.set(2,2,5);
    scene.add(light,new THREE.AmbientLight(0x404040));
    controls = new THREE.OrbitControls(camera, renderer.domElement);
    controls.enableDamping=true;
    animate3D();
  }
}

function draw3D(type){
  resetAll();
  init3D();
  let geometry;
  if(type==="cube") geometry = new THREE.BoxGeometry(2,2,2);
  else if(type==="sphere") geometry = new THREE.SphereGeometry(1.5,32,32);
  else if(type==="cone") geometry = new THREE.ConeGeometry(1.5,3,32);
  else if(type==="cylindre") geometry = new THREE.CylinderGeometry(1,1,3,32);
  else if(type==="pyramide") geometry = new THREE.ConeGeometry(1.8,2.5,4);
  else if(type==="tore") geometry = new THREE.TorusGeometry(1,0.4,16,100);
  const material = new THREE.MeshPhongMaterial({color:0x00ffcc,flatShading:true});
  meshActuel = new THREE.Mesh(geometry,material);
  scene.add(meshActuel);
  def.textContent=type.toUpperCase()+" 3D";
  mesures.textContent="Volume/Surface : calcul √† ajouter selon dimensions";
  formules.textContent="Formules 3D : Volume = ..., Surface = ...";
}

function animate3D(){
  requestAnimationFrame(animate3D);
  if(meshActuel) meshActuel.rotation.y += 0.01;
  controls.update();
  renderer.render(scene,camera);
}
</script>
</body>
</html>

