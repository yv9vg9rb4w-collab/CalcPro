<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>CalcPro PRO - IntÃ©grale NumÃ©rique</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root{
  --accent:#00ffcc;
  --bg:#0d0d0d;
  --card:#1a1a1a;
  --text:#ffffff;
}
body{
  margin:0; padding:10px;
  font-family:sans-serif;
  background:var(--bg);
  color:var(--text);
}
h2{text-align:center;color:var(--accent);}
.interface{
  max-width:700px;
  margin:auto;
  display:flex;
  flex-direction:column;
  gap:10px;
}
input[type=number], input[type=text]{
  width:80px; padding:5px; margin:2px;
  border-radius:4px; border:1px solid #333;
  background:var(--card); color:var(--text);
  text-align:center;
}
button{
  padding:8px 12px; margin:4px;
  border-radius:8px; border:none; cursor:pointer;
  font-weight:bold;
  background:var(--card); color:var(--text);
}
button:hover{background:var(--accent); color:black;}
#result{
  margin-top:10px;
  padding:10px;
  background:#111;
  border-radius:8px;
  white-space:pre-wrap;
  max-height:400px;
  overflow:auto;
}
.flex-row{display:flex; flex-wrap:wrap; gap:5px; align-items:center;}
.title-section{color:var(--accent); font-weight:bold; margin-top:10px; text-align:center;}
table{border-collapse:collapse; width:100%; margin-top:5px;}
th, td{border:1px solid #333; padding:4px; text-align:center;}
th{background:var(--card);}
</style>
</head>
<body>

<h2>CalcPro PRO - IntÃ©grale NumÃ©rique</h2>

<div class="interface">

  <div class="title-section">Fonction Ã  intÃ©grer</div>
  <div class="flex-row">
    f(x) = <input type="text" id="func" value="x^2">
  </div>

  <div class="title-section">Intervalle et subdivisions</div>
  <div class="flex-row">
    a = <input type="number" id="a" value="0">
    b = <input type="number" id="b" value="1">
    n = <input type="number" id="n" value="4">
  </div>

  <div class="title-section">MÃ©thode</div>
  <div class="flex-row">
    <button onclick="computeIntegral('rectangle')">Rectangle</button>
    <button onclick="computeIntegral('trapeze')">TrapÃ¨ze</button>
    <button onclick="computeIntegral('simpson')">Simpson</button>
  </div>

  <div id="result"></div>

</div>

<script>
// ðŸŒŸ Fonction dâ€™Ã©valuation
function evalFunc(fx, x){
  fx = fx.replace(/\^/g,"**");
  try{
    return eval(fx);
  }catch(e){
    return NaN;
  }
}

// ðŸŒŸ Fonction principale
function computeIntegral(method){
  const fx = document.getElementById("func").value;
  const a = parseFloat(document.getElementById("a").value);
  const b = parseFloat(document.getElementById("b").value);
  let n = parseInt(document.getElementById("n").value);
  if(n<=0) n=4;
  const h = (b-a)/n;
  let sum = 0;
  let table = "<table><tr><th>i</th><th>x_i</th><th>f(x_i)</th></tr>";

  if(method==='rectangle'){
    for(let i=0;i<n;i++){
      const x = a + i*h;
      const y = evalFunc(fx,x);
      sum += y;
      table += `<tr><td>${i}</td><td>${x.toFixed(4)}</td><td>${y.toFixed(4)}</td></tr>`;
    }
    sum *= h;
    table += "</table>";
  }
  else if(method==='trapeze'){
    for(let i=0;i<n;i++){
      const x0 = a + i*h;
      const x1 = x0 + h;
      const y0 = evalFunc(fx,x0);
      const y1 = evalFunc(fx,x1);
      sum += (y0 + y1)/2*h;
      table += `<tr><td>${i}</td><td>${x0.toFixed(4)}</td><td>${y0.toFixed(4)}</td></tr>`;
    }
    table += "</table>";
  }
  else if(method==='simpson'){
    if(n%2!==0) n+=1;
    const h2 = (b-a)/n;
    let s = evalFunc(fx,a) + evalFunc(fx,b);
    table += `<tr><td>0</td><td>${a.toFixed(4)}</td><td>${evalFunc(fx,a).toFixed(4)}</td></tr>`;
    for(let i=1;i<n;i++){
      const x = a + i*h2;
      const y = evalFunc(fx,x);
      s += y*(i%2===0?2:4);
      table += `<tr><td>${i}</td><td>${x.toFixed(4)}</td><td>${y.toFixed(4)}</td></tr>`;
    }
    sum = s*h2/3;
    table += `<tr><td>${n}</td><td>${b.toFixed(4)}</td><td>${evalFunc(fx,b).toFixed(4)}</td></tr>`;
    table += "</table>";
  }

  document.getElementById("result").innerHTML = `<strong>MÃ©thode:</strong> ${method}<br><strong>RÃ©sultat â‰ˆ</strong> ${sum.toFixed(6)}<br>${table}`;
}
</script>

</body>
</html>
