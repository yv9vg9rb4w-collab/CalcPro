<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>CalcPro - Int√©grale Num√©rique</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root{
  --accent:#00ffcc;
  --bg:#0d0d0d;
  --card:#1a1a1a;
  --text:#ffffff;
}
body{
  margin:0; padding:10px;
  font-family:sans-serif;
  background:var(--bg);
  color:var(--text);
}
h2{text-align:center;color:var(--accent);}
.interface{
  display:flex; flex-direction:column; gap:10px; max-width:600px; margin:auto;
}
input[type=number], input[type=text]{
  width:80px; padding:5px; margin:2px;
  border-radius:4px; border:1px solid #333;
  background:var(--card); color:var(--text);
  text-align:center;
}
button{
  padding:8px 12px; margin:4px;
  border-radius:8px; border:none; cursor:pointer;
  font-weight:bold;
  background:var(--card); color:var(--text);
}
button:hover{background:var(--accent); color:black;}
#result{
  margin-top:10px;
  padding:10px;
  background:#111;
  border-radius:8px;
  min-height:50px;
  white-space:pre-wrap;
}
.flex-row{display:flex; flex-wrap:wrap; gap:5px; align-items:center;}
.title-section{color:var(--accent); font-weight:bold; margin-top:10px; text-align:center;}
</style>
</head>
<body>

<h2>CalcPro - Int√©grale Num√©rique</h2>

<div class="interface">

  <div class="title-section">Fonction √† int√©grer</div>
  <div class="flex-row">
    f(x) = <input type="text" id="func" value="x^2">
  </div>

  <div class="title-section">Intervalle</div>
  <div class="flex-row">
    a = <input type="number" id="a" value="0">
    b = <input type="number" id="b" value="1">
    n (subdivisions) = <input type="number" id="n" value="100">
  </div>

  <div class="title-section">M√©thode</div>
  <div class="flex-row">
    <button onclick="computeIntegral('rectangle')">Rectangle</button>
    <button onclick="computeIntegral('trapeze')">Trap√®ze</button>
    <button onclick="computeIntegral('simpson')">Simpson</button>
  </div>

  <div id="result"></div>

</div>

<script>
// üåü Fonction d‚Äô√©valuation
function evalFunc(fx, x){
  fx = fx.replace(/\^/g, "**"); // convert ^ en puissance
  try{
    return eval(fx);
  }catch(e){
    return NaN;
  }
}

// üåü Int√©gration num√©rique
function computeIntegral(method){
  const fx = document.getElementById("func").value;
  const a = parseFloat(document.getElementById("a").value);
  const b = parseFloat(document.getElementById("b").value);
  let n = parseInt(document.getElementById("n").value);
  if(n<=0) n=100;
  const h = (b-a)/n;
  let sum = 0;

  if(method==='rectangle'){
    for(let i=0;i<n;i++){
      const x = a + i*h;
      sum += evalFunc(fx,x);
    }
    sum *= h;
  }

  else if(method==='trapeze'){
    for(let i=0;i<n;i++){
      const x0 = a + i*h;
      const x1 = x0 + h;
      sum += (evalFunc(fx,x0)+evalFunc(fx,x1))/2 * h;
    }
  }

  else if(method==='simpson'){
    if(n%2!==0) n+=1; // Simpson n√©cessite n pair
    const h2 = (b-a)/n;
    let s = evalFunc(fx,a) + evalFunc(fx,b);
    for(let i=1;i<n;i++){
      const x = a + i*h2;
      s += evalFunc(fx,x)*(i%2===0?2:4);
    }
    sum = s*h2/3;
  }

  document.getElementById("result").textContent = `M√©thode: ${method}\nR√©sultat ‚âà ${sum}`;
}
</script>
</body>
</html>
