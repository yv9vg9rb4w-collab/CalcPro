<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Lebbar Matrix Calculator</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
    margin:0;
    background:#020617;
    color:white;
    font-family:Arial, sans-serif;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
}
.box{
    width:95%;
    max-width:700px;
    background:#020617;
    border-radius:18px;
    padding:15px;
    box-shadow:0 25px 50px rgba(0,0,0,.7);
}
.title{
    text-align:center;
    font-weight:bold;
    color:#38bdf8;
    margin-bottom:12px;
}
.area{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:10px;
}
textarea{
    width:100%;
    height:120px;
    background:#020617;
    color:#22c55e;
    border:1px solid #334155;
    border-radius:12px;
    padding:10px;
    font-size:16px;
    resize:none;
}
.buttons{
    margin:12px 0;
    display:grid;
    grid-template-columns:repeat(5,1fr);
    gap:8px;
}
button{
    height:45px;
    border:none;
    border-radius:12px;
    background:#1e293b;
    color:white;
    font-size:15px;
}
button:active{transform:scale(0.95);}
.result{
    background:#000;
    color:#00ff88;
    border-radius:12px;
    padding:12px;
    min-height:80px;
    white-space:pre;
}
</style>
</head>

<body>

<div class="box">
<div class="title">üßÆ LEBBAR ‚Ä¢ MATRIX CALCULATOR</div>

<div class="area">
<textarea id="A" placeholder="Matrice A (ex : 1 2&#10;3 4)"></textarea>
<textarea id="B" placeholder="Matrice B"></textarea>
</div>

<div class="buttons">
<button onclick="add()">A + B</button>
<button onclick="sub()">A ‚àí B</button>
<button onclick="mul()">A √ó B</button>
<button onclick="detA()">det(A)</button>
<button onclick="invA()">A‚Åª¬π</button>
</div>

<div class="result" id="result">R√©sultat ici</div>
</div>

<script>
const Aarea = document.getElementById("A");
const Barea = document.getElementById("B");
const R = document.getElementById("result");

function parseMatrix(text){
    let rows = text.trim().split("\n");
    let matrix = rows.map(r => r.trim().split(/\s+/).map(Number));

    let cols = matrix[0].length;
    for(let r of matrix){
        if(r.length !== cols || r.some(isNaN)){
            throw "Format incorrect";
        }
    }
    return matrix;
}

function display(M){
    return M.map(r => r.map(v => Number(v.toFixed(4))).join(" ")).join("\n");
}

function add(){
    try{
        let A = parseMatrix(Aarea.value);
        let B = parseMatrix(Barea.value);
        let C = A.map((r,i)=>r.map((v,j)=>v + B[i][j]));
        R.innerText = display(C);
    }catch(e){ R.innerText="Erreur A + B"; }
}

function sub(){
    try{
        let A = parseMatrix(Aarea.value);
        let B = parseMatrix(Barea.value);
        let C = A.map((r,i)=>r.map((v,j)=>v - B[i][j]));
        R.innerText = display(C);
    }catch(e){ R.innerText="Erreur A ‚àí B"; }
}

function mul(){
    try{
        let A = parseMatrix(Aarea.value);
        let B = parseMatrix(Barea.value);
        let C = A.map(r =>
            B[0].map((_,j) =>
                r.reduce((s,v,i)=> s + v * B[i][j], 0)
            )
        );
        R.innerText = display(C);
    }catch(e){ R.innerText="Erreur A √ó B"; }
}

function detA(){
    try{
        let M = parseMatrix(Aarea.value);

        if(M.length === 2){
            let d = M[0][0]*M[1][1] - M[0][1]*M[1][0];
            R.innerText = d;
        }
        else if(M.length === 3){
            let d =
              M[0][0]*(M[1][1]*M[2][2]-M[1][2]*M[2][1])
            - M[0][1]*(M[1][0]*M[2][2]-M[1][2]*M[2][0])
            + M[0][2]*(M[1][0]*M[2][1]-M[1][1]*M[2][0]);
            R.innerText = d;
        }
        else{
            R.innerText = "det : seulement 2√ó2 ou 3√ó3";
        }
    }catch(e){ R.innerText="Erreur det(A)"; }
}

function invA(){
    try{
        let M = parseMatrix(Aarea.value);

        if(M.length !== 2){
            R.innerText="Inverse seulement 2√ó2";
            return;
        }

        let d = M[0][0]*M[1][1] - M[0][1]*M[1][0];
        if(d === 0){
            R.innerText="Matrice non inversible";
            return;
        }

        let I = [
            [ M[1][1]/d, -M[0][1]/d ],
            [ -M[1][0]/d, M[0][0]/d ]
        ];

        R.innerText = display(I);
    }catch(e){ R.innerText="Erreur A‚Åª¬π"; }
}
</script>

</body>
</html>
