<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>CalcPro - Calcul Matrices</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root{
  --accent:#00ffcc;
  --bg:#0d0d0d;
  --card:#1a1a1a;
  --text:#ffffff;
}
body{
  margin:0; padding:10px;
  font-family:sans-serif;
  background:var(--bg);
  color:var(--text);
}
h2{text-align:center;color:var(--accent);}
.interface{
  display:flex; flex-direction:column; gap:10px; max-width:800px; margin:auto;
}
input[type=number]{
  width:50px; padding:4px; margin:2px;
  border-radius:4px; border:1px solid #333; background:var(--card); color:var(--text);
  text-align:center;
}
button{
  padding:8px 12px;
  margin:4px;
  border-radius:8px;
  border:none;
  cursor:pointer;
  font-weight:bold;
  background:var(--card);
  color:var(--text);
}
button:hover{background:var(--accent); color:black;}
#result{
  margin-top:10px;
  padding:10px;
  background:#111;
  border-radius:8px;
  min-height:60px;
  white-space:pre-wrap;
}
.flex-row{display:flex; flex-wrap:wrap; gap:5px;}
.matrix-container{
  display:flex; flex-direction:column; gap:5px; margin-bottom:10px;
}
.matrix-row{display:flex; gap:5px;}
.title-section{color:var(--accent); font-weight:bold; margin-top:10px; text-align:center;}
</style>
</head>
<body>

<h2>CalcPro - Calcul Matrices</h2>

<div class="interface">

  <div class="title-section">Matrice A</div>
  <div id="matrixA" class="matrix-container"></div>

  <div class="title-section">Matrice B</div>
  <div id="matrixB" class="matrix-container"></div>

  <div class="title-section">Actions</div>
  <div class="flex-row">
    <button onclick="addMatrices()">A + B</button>
    <button onclick="subMatrices()">A - B</button>
    <button onclick="mulMatrices()">A √ó B</button>
    <button onclick="transposeMatrix('A')">Transpose A</button>
    <button onclick="transposeMatrix('B')">Transpose B</button>
    <button onclick="detMatrix('A')">Det A</button>
    <button onclick="detMatrix('B')">Det B</button>
    <button onclick="inverseMatrix('A')">Inverse A</button>
    <button onclick="inverseMatrix('B')">Inverse B</button>
  </div>

  <div class="title-section">Param√®tres</div>
  <div class="flex-row">
    <label>Lignes: <input type="number" id="rows" value="2" min="1" max="5"></label>
    <label>Colonnes: <input type="number" id="cols" value="2" min="1" max="5"></label>
    <button onclick="generateMatrices()">Cr√©er matrices</button>
  </div>

  <div id="result"></div>

</div>

<script>
// üåü Variables globales
let matrixA = [];
let matrixB = [];

function generateMatrices(){
  const rows = parseInt(document.getElementById("rows").value);
  const cols = parseInt(document.getElementById("cols").value);
  matrixA = createMatrixInputs("matrixA", rows, cols);
  matrixB = createMatrixInputs("matrixB", rows, cols);
  document.getElementById("result").textContent = "Matrices cr√©√©es !";
}

function createMatrixInputs(containerId, rows, cols){
  const container = document.getElementById(containerId);
  container.innerHTML = "";
  const matrix = [];
  for(let i=0;i<rows;i++){
    const rowDiv = document.createElement("div");
    rowDiv.className="matrix-row";
    const row = [];
    for(let j=0;j<cols;j++){
      const input = document.createElement("input");
      input.type="number"; input.value="0";
      rowDiv.appendChild(input);
      row.push(input);
    }
    container.appendChild(rowDiv);
    matrix.push(row);
  }
  return matrix;
}

// üåü Fonctions de calcul
function readMatrix(matrix){
  return matrix.map(row=>row.map(input=>parseFloat(input.value)));
}

function showResult(msg){
  document.getElementById("result").textContent = msg;
}

// Addition
function addMatrices(){
  const A = readMatrix(matrixA);
  const B = readMatrix(matrixB);
  if(A.length!==B.length || A[0].length!==B[0].length){
    showResult("Erreur : dimensions diff√©rentes !");
    return;
  }
  const R = A.map((row,i)=>row.map((val,j)=>val+B[i][j]));
  showResult(matrixToString(R));
}

// Soustraction
function subMatrices(){
  const A = readMatrix(matrixA);
  const B = readMatrix(matrixB);
  if(A.length!==B.length || A[0].length!==B[0].length){
    showResult("Erreur : dimensions diff√©rentes !");
    return;
  }
  const R = A.map((row,i)=>row.map((val,j)=>val-B[i][j]));
  showResult(matrixToString(R));
}

// Multiplication
function mulMatrices(){
  const A = readMatrix(matrixA);
  const B = readMatrix(matrixB);
  if(A[0].length!==B.length){
    showResult("Erreur : colonnes de A ‚â† lignes de B !");
    return;
  }
  const R = [];
  for(let i=0;i<A.length;i++){
    R[i]=[];
    for(let j=0;j<B[0].length;j++){
      let sum=0;
      for(let k=0;k<B.length;k++){
        sum+=A[i][k]*B[k][j];
      }
      R[i][j]=sum;
    }
  }
  showResult(matrixToString(R));
}

// Transpose
function transposeMatrix(name){
  const M = name==="A"? readMatrix(matrixA) : readMatrix(matrixB);
  const R = M[0].map((_,i)=>M.map(row=>row[i]));
  showResult(matrixToString(R));
}

// D√©terminant (seulement 2x2 ou 3x3)
function detMatrix(name){
  const M = name==="A"? readMatrix(matrixA) : readMatrix(matrixB);
  if(M.length!==M[0].length){ showResult("Erreur : pas carr√© !"); return;}
  let det;
  if(M.length===2){
    det = M[0][0]*M[1][1]-M[0][1]*M[1][0];
  } else if(M.length===3){
    det = M[0][0]*(M[1][1]*M[2][2]-M[1][2]*M[2][1])
        - M[0][1]*(M[1][0]*M[2][2]-M[1][2]*M[2][0])
        + M[0][2]*(M[1][0]*M[2][1]-M[1][1]*M[2][0]);
  } else { showResult("Determinant seulement 2x2 ou 3x3"); return;}
  showResult("det("+name+") = "+det);
}

// Inverse (2x2 seulement)
function inverseMatrix(name){
  const M = name==="A"? readMatrix(matrixA) : readMatrix(matrixB);
  if(M.length!==2 || M[0].length!==2){ showResult("Inverse seulement 2x2"); return;}
  const det = M[0][0]*M[1][1]-M[0][1]*M[1][0];
  if(det===0){ showResult("Erreur : determinant = 0, pas d'inverse"); return;}
  const R = [
    [ M[1][1]/det, -M[0][1]/det],
    [-M[1][0]/det,  M[0][0]/det]
  ];
  showResult(matrixToString(R));
}

// üåü Helper
function matrixToString(M){
  return M.map(row=>row.join("\t")).join("\n");
}

// G√©n√©rer au d√©part
generateMatrices();

</script>
</body>
</html>
