<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CalcPro Final Engine</title>
    <style>
        body { margin: 0; overflow: hidden; background-color: #000; font-family: sans-serif; }
        canvas { display: block; width: 100vw; height: 100vh; }
        #ui {
            position: absolute; width: 100%; height: 100%;
            pointer-events: none; z-index: 10;
            display: flex; flex-direction: column; justify-content: space-between;
            padding: 20px; box-sizing: border-box;
        }
        .text-neon { color: #00ff88; text-shadow: 0 0 10px #00ff88; font-weight: bold; }
        .info { font-family: monospace; font-size: 10px; opacity: 0.7; }
    </style>
</head>
<body>

    <div id="ui">
        <div class="info text-neon">ALGO: V5_STABLE<br>CORE: CALCPRO_V5<br>MODE: HYBRID_AUTO</div>
        <div id="footer" class="text-neon" style="text-align: center; font-size: 18px;">CalcPro Â© Lebbar Yahya</div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/three@0.145.0/build/three.min.js"></script>

    <script>
        window.onload = function() {
            try {
                const scene = new THREE.Scene();
                const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
                const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: false });
                
                renderer.setSize(window.innerWidth, window.innerHeight);
                renderer.setPixelRatio(window.devicePixelRatio > 1 ? 2 : 1);
                document.body.appendChild(renderer.domElement);

                // Forme 3D
                const geometry = new THREE.TorusKnotGeometry(8, 2, 100, 16);
                const material = new THREE.PointsMaterial({
                    size: 0.15,
                    color: 0x00ff88,
                    transparent: true,
                    blending: THREE.AdditiveBlending
                });

                const points = new THREE.Points(geometry, material);
                scene.add(points);

                camera.position.z = 25;

                // Animation
                function animate() {
                    requestAnimationFrame(animate);
                    points.rotation.y += 0.01;
                    points.rotation.x += 0.005;
                    
                    // Couleur changeante
                    const time = Date.now() * 0.0005;
                    material.color.setHSL(time % 1, 0.8, 0.5);
                    
                    renderer.render(scene, camera);
                }

                animate();

                // Gestion tactile
                window.addEventListener('touchstart', () => {
                    material.size = 0.3; // Grossit au toucher
                    setTimeout(() => material.size = 0.15, 200);
                });

                window.addEventListener('resize', () => {
                    camera.aspect = window.innerWidth / window.innerHeight;
                    camera.updateProjectionMatrix();
                    renderer.setSize(window.innerWidth, window.innerHeight);
                });

            } catch (e) {
                document.getElementById('ui').innerHTML += '<div style="color:red">Erreur WebGL: ' + e.message + '</div>';
            }
        };
    </script>
</body>
</html>
